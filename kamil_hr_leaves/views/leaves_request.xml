<odoo>
  <data>
    
    <record  id="hr_leave_view_form_manager_inherit" model="ir.ui.view">
        <field name="name">Leaves Request</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form_manager"/>
        <field name="arch" type="xml">
          <xpath expr="//field[@name='report_note']" position="replace">
            <field name="report_note"/>
          </xpath>
          <xpath expr="//field[@name='payslip_status']" position="replace">
          </xpath>

          <xpath expr="//field[@name='department_id']" position="replace">
            <field name="department_id" readonly="True"/>
          </xpath>
        </field>
      </record>

      <record id="view_hr_holidays_search" model="ir.ui.view">
        <field name="name">hr.holidays.search</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.view_hr_holidays_filter"/>
        <field name="arch" type="xml">
          <xpath expr="//search" position="replace">
            <search>
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="holiday_status_id"/>
                <field name="name"/>                
                <separator/>
                <filter string="My Leaves" name="my_leaves" domain="[('employee_id.user_id', '=', uid)]"/>
                <separator/>
                <group expand="0" string="Group By">
                    <filter name="group_employee" string="Employee" context="{'group_by':'employee_id'}"/>
                    <filter name="group_type" string="Type" context="{'group_by':'holiday_status_id'}"/>
                    <filter name="group_name" string="Description" context="{'group_by':'name'}"/>
                    <filter name="group_address" string="Address" context="{'group_by':'address'}"/>
                    <separator/>
                    <filter name="group_date_from" string="Start Date" context="{'group_by':'date_from'}"/>
                    <filter name="group_date_to" string="End Date" context="{'group_by':'date_to'}"/>
                </group>
            </search>
          </xpath>
        </field>
      </record>

      <record  id="leaves_request_tree_view" model="ir.ui.view">
        <field name="name">Leaves Request</field>
        <field name="model">hr.leave</field>
        <field name="arch" type="xml">
          <tree>
            <field name="employee_id"/>
            <field name="holiday_status_id"/>
            <field name="request_date_from"/>
            <field name="request_date_to"/>
            <field name="duration_display"/>
            <field name="state"/>
          </tree>
        </field>
      </record>
    
    <record  id="leaves_request" model="ir.ui.view">
        <field name="name">Leaves Request</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form"/>
        <field name="arch" type="xml">
          <xpath expr="//button[@name='action_refuse']" position="replace">
            <button string="Refuse" name="action_refuse"  type="object" attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', 'in', ('draft','validate','end','acting'))]}"/>
          </xpath>
                      
          <xpath expr="//header" position="replace">
            <header>
                <button string="Send" name="do_send" type="object" class="oe_highlight" states="draft"/>


                <button string="Approve" name="dep_manger_confirm" type="object"  states="dep_manger" class="oe_highlight" groups="kamil_hr_security.hr_head_department_group"/>
                <button string="Returnn" name="return1" type="object"  states="dep_manger" class="oe_highlight" groups="kamil_hr_security.hr_head_department_group"/>
                
                <button string="Approve" name="hr_manger" type="object"  states="confirm" class="oe_highlight" attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', '!=', 'confirm')]}" groups="kamil_hr_security.hr_sub_manager_group,kamil_hr_security.hr_director_public_administration_group"/>
                <button string="Returnn" name="return2" type="object"  states="confirm" class="oe_highlight" attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', '!=', 'confirm')]}" groups="kamil_hr_security.hr_sub_manager_group,kamil_hr_security.hr_director_public_administration_group"/>

                <button string="Validate" name="action_validate" states="hr_manger" type="object" class="oe_highlight" groups="kamil_hr_security.hr_head_of_hr_dept_group,kamil_hr_security.hr_general_department_group"/>
                <button string="Returnn" name="action_return3" states="hr_manger" type="object" class="oe_highlight" groups="kamil_hr_security.hr_head_of_hr_dept_group,kamil_hr_security.hr_general_department_group"/>

                <button string="Approve" name="action_acting" states="acting" type="object" class="oe_highlight"/>

                <button string="Returnn" name="action_return" states="acting" type="object" />
                
                <button string="Set to Draft" name="set_to_draft" states="validate" type="object" groups="kamil_hr_security.hr_head_of_hr_dept_group,kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_employment_department_group"/>

                <field name="state" widget="statusbar" statusbar_visible="draft,confirm,dep_manger,g_manger,hr_manger,validate"/>
            </header>
          </xpath>

           
            <xpath expr="//field[@name='employee_id']" position="replace">
              <field name="employee_no" string="Employee Number" attrs="{'readonly':[('state','!=','draft')]}" invisible="False"/>
              <field name="employee_id" options="{'no_create':1}" attrs="{'readonly':[('state','!=','draft')]}" invisible="False"/>
              <field name="who_acting" options="{'no_create':1}"  attrs="{'required':[('can_acting','=','yes')],'readonly':[('state','!=','draft')]}" invisible="False"/>
              <field name="can_acting" invisible="1"/>
            </xpath>
                
            <xpath expr="//sheet//group" position="after">
              <notebook>
                <page string="Documents">
                  <field name="document_ids" attrs="{'readonly':[('state','!=','draft')]}">
                    <tree editable="bottom" delete="false">
                      <field name="document_id" required="1"/>
                      <field name="attach" required="1"/>
                    </tree>
                  </field>
                </page>
              </notebook>
            </xpath>

             <xpath expr="//field[@name='name']" position="replace">
              <field name="date_direct_action"/>
              <field name="address" attrs="{'readonly':[('state','!=','draft')]}"/>
              <field name="name" string="Description" attrs="{'readonly':[('state','!=','draft')]}"/>
            </xpath>
                
            <xpath expr="//field[@name='name']" position="after">
              <field name="reason" string="Reason" attrs="{'readonly':[('state','!=','draft')]}"/>
            </xpath>
            
            <xpath expr="//field[@name='number_of_days_display']" position="attributes">
              <attribute name="attrs">{'readonly':[('state','!=','draft')], 'required':True}</attribute>
            </xpath>

            <xpath expr="//field[@name='request_date_to']" position="attributes">
              <attribute name="force_save">True</attribute>
              <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
            </xpath>

            <xpath expr="//field[@name='holiday_status_id']" position="attributes">
              <attribute name="attrs">{'readonly':[('state','!=','draft')]}</attribute>
            </xpath>

            <xpath expr="//field[@name='request_date_from']" position="attributes">
              <attribute name="attrs">{'required':True,'readonly':[('state','!=','draft')]}</attribute>
            </xpath>

            <xpath expr="//label[@for='request_unit_half']" position="replace">
            </xpath>

            <xpath expr="//field[@name='date_from']" position="replace">
              <field name="date_from" invisible="True"/>
            </xpath>

            <xpath expr="//field[@name='date_to']" position="replace">
              <field name="date_to" invisible="True"/>
            </xpath>

            <xpath expr="//field[@name='request_unit_half']" position="attributes">
              <attribute name="attrs">{'invisible':True}</attribute>
            </xpath> 
    </field>
    </record>




    <record id="hr_holidays.hr_leave_action_new_request_view_calendar" model="ir.actions.act_window.view">
        <field name="sequence">3</field>
        <field name="view_mode">calendar</field>
        <field name="act_window_id" ref="hr_holidays.hr_leave_action_new_request"/>
        <field name="view_id" ref="hr_holidays.hr_leave_view_calendar"/>
    </record>
    <record id="hr_holidays.hr_leave_action_new_request_view_tree" model="ir.actions.act_window.view">
        <field name="sequence">1</field>
        <field name="view_mode">tree</field>
        <field name="act_window_id" ref="hr_holidays.hr_leave_action_new_request"/>
        <field name="view_id" ref="hr_holidays.hr_leave_view_tree_my"/>
    </record>
    <record id="hr_holidays.hhr_leave_action_new_request_view_form" model="ir.actions.act_window.view">
        <field name="sequence">2</field>
        <field name="view_mode">form</field>
        <field name="act_window_id" ref="hr_holidays.hr_leave_action_new_request"/>
        <field name="view_id" ref="hr_holidays.hr_leave_view_form"/>
    </record>

    <record  id="hr_leave_view_kanban_inherit" model="ir.ui.view">
        <field name="name">hr.leave.view.kanban.inherit</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_kanban"/>
        <field name="arch" type="xml">
          <xpath expr="//kanban" position="replace">
            <kanban class="o_kanban_mobile" create="0">
                <field name="employee_id"/>
                <field name="request_date_from"/>
                <field name="request_date_to"/>
                <field name="name"/>
                <field name="number_of_days_display"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click container">
                            <div class="row no-gutters">
                                <div class="col-12">
                                    <field name="name"/><br/>
                                    <field name="employee_id"/><br/>
                                    عدد الايام  : <field name="number_of_days_display"/><br/>
                                    من تاريخ  : <field name="request_date_from"/><br/>
                                    الي تاريخ  : <field name="request_date_to"/>
                                </div>
                            </div>
                        </div> 
                    </t>
                </templates>
            </kanban>
          </xpath>
        </field>
      </record>

      <menuitem
        id="hr_holidays.menu_hr_holidays_my_leaves"
        name="My Leaves"
        parent="base.group_no_one"
        sequence="3"/>

      <menuitem
        id="hr_holidays.hr_leave_menu_new_request"
        action="hr_holidays.hr_leave_action_new_request"
        parent="base.group_no_one"
        sequence="2"/>



        <record id="hr_leave_action_request" model="ir.actions.act_window">
          <field name="name">Leaves Requests</field>
          <field name="res_model">hr.leave</field>
          <field name="view_type">form</field>
          <field name="view_mode">tree,form,calendar</field>
          <field name="context">{}</field>
          <field name="domain">[]</field>
          <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                  Create a new leave request
              </p>
          </field>
        </record>

        <menuitem
        id="hr_leave_menu_requests"
        name="طلبات الإجازات"
        parent="hr_holidays.menu_hr_holidays_root"
        action="hr_leave_action_request"
        sequence="1"/>

     
    
    
    </data>
</odoo>
