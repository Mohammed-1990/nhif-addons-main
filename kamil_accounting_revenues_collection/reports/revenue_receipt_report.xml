<?xml version="1.0" encoding="utf-8" ?>
<odoo>

	<report 
		id="revenue_receipt_report"
		model="collection.collection"
		string="Revenue Receipt"
		report_type="qweb-html"
		name="kamil_accounting_revenues_collection.revenue_receipt_template"
	/>

	<template id="revenue_receipt_template">
		<t t-call="web.html_container">
			<t t-foreach="docs" t-as="o">
				<t t-call="web.external_layout">
                    <div class="page" dir="rtl">

					<div dir="rtl" style="float:right;text-align:start;">
							<a href="#" target="_blank">
								<svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							  		<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
							  		<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
							  		<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
								</svg>
							</a>
						</div>
                    	<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">

                           
                            <tr>
                                <td colspan="2">
                                    <div class="text-center">
                                        <strong>
                                            <t>
                                                  رقم الايصال
                                               -
                                                <t t-esc="o.ref"/>
                                            </t>
                                            
                                        </strong>
                                    </div>
                                </td>

                            </tr>
							 <tr>
                                <td>
                                    <strong style="float:right">  الموقع  :</strong>
                                    <span style="float:right;margin-right:20px" t-esc="o.state_id.name"/>
                                </td>
                                <td>
                                    <strong style="float:right">  وصل من :</strong>
                                    <span style="float:right;margin-right:20px" t-esc="o.partner_id.name"/>
                                </td>
                            </tr>
                        </table>


                            <table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">
                                
                                <thead class="table-active" style="display: table-header-group;">
                                    <tr style="page-break-inside: avoid;" class="table-active">
                                        <th class="text-center fit">#</th>
                                        <th class="text-center fit"> البيان  </th>
                                        <th class="text-center fit"> المبلغ </th>
                                    </tr>
                                </thead>
                				<tbody>
				                <t t-set="counter" t-value="1"/>

									<t t-foreach="o.line_ids" t-as="line">


										<tr style="page-break-inside: avoid;">
										<td class="text-center">
										<t t-esc="counter"/>
										<t t-set="counter" t-value="counter + 1"/>
										</td>

										<td class="text-center">
										<t t-esc="line.account_id.name"/></td>
										<td class="text-center">

										<t t-esc="'{0:,.2f}'.format(line.amount)"/></td>
										</tr>

									</t>
										<!--  -->
										<tr style="page-break-inside: avoid;">
											<td class="text-center"> اجمالي المبلغ</td>

											<td class="text-center"><t t-esc="o.amount_in_words"/></td>
										<td class="text-center"><t t-esc="'{0:,.2f}'.format(o.amount)"/></td>


										</tr>

										<!--  -->
							

										<!--  -->
								</tbody>
						    </table>
								<!--  -->
								<p class="text-right">

								<t t-if="o.collection_type == 'Cheque'">
							<p class="text-right"><strong>نوع التحصيل:</strong> شيك | رقم الشيك: <t t-esc="o.cheque_number"/> | البنك: <t t-esc="o.cheque_bank.name"/></p>
						</t>
						<t t-if="o.collection_type == 'cash'">
							<p class="text-right"><strong>نوع التحصيل:</strong> نقداً</p>
						</t>
						<t t-if="o.collection_type == 'bank_transfer'">
							<p class="text-right"><strong>نوع التحصيل:</strong> تحويل بنكي | رقم التحويلة: <t t-esc="o.cheque_number"/> | البنك: <t t-esc="o.cheque_bank.name"/></p>
						</t>
						<t t-if="o.collection_type == 'counter_cheque'">
							<p class="text-right"><strong>نوع التحصيل:</strong> شيك مصرفي | رقم الشيك: <t t-esc="o.cheque_number"/> | البنك: <t t-esc="o.cheque_bank.name"/></p>
						</t>
						<t t-if="o.collection_type == 'e_bank'">
							<p class="text-right"><strong>نوع التحصيل:</strong> دفع إلكتروني | رقم المعاملة: <t t-esc="o.transaction_number"/> | التطبيق: <t t-esc="o.bank_application_id.name"/></p>
						</t>
								</p>
								
								<p class="text-right">
								<strong> التعليق:</strong>  <t t-esc="o.name"/>
								</p>
								<!--  -->
<div t-attf-class="#{'col-10' if report_type != 'html' else 'col-sm-10 col-md-9'} ml-auto">
                        <table style="width:100%; background-color:#FFF;" class="table table-sm">
                            <tbody>
                                <tr>
                                
                                    <td style="background-color:#FFF;">
                                        <div stylr="text-left; background-color:#FFF">
<!--                                            <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('QR', o.get_qr_code_data(), 350,350)" alt="qr"  style="height:150px"/>-->
                                            <t t-esc="o.generate_qr_code()"/>
                                            <img t-att-src="image_data_uri(o.qr_code)" style="max-height: 150px;" alt="QR Code"/>
                                        </div>
                                    </td>
                                    
                                    
                                    <td style="background-color:#FFF;">
                                        <table class="table table-sm" style="page-break-inside: avoid;">
                                            
											 <tr class="border-black o_subtotal" >
											 		<td class="text-right" style="background: #fff; color: #000;"><strong class="text-right">   اسم المتحصل</strong></td>

                                                <td class="text-right" style="background: #fff; color: #000;">
                                                    <span t-field="o.collector_id.name"/>
                                                </td>
                                            </tr>

											 <tr class="border-black o_subtotal" >
											 		<td class="text-right" style="background: #fff; color: #000;"><strong class="text-right">   التاريخ</strong></td>

                                                <td class="text-right" style="background: #fff; color: #000;">
                                                    <span t-field="o.date"/>
                                                </td>
                                            </tr>
                                        
                                        </table>
                                    </td>
                                    
                                </tr>
                            </tbody>
                        </table>

   </div>

								<!--  -->
							
						
					</div>
				</t>
							
			</t>
		</t>
	</template>

</odoo>
