<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Inventory Group -->
    <record id="module_category_kamil_inventory" model="ir.module.category" >
        <field name="name">Inventory</field>
        <field name="sequence">30</field>
    </record>

    <record id="group_ive_department_manager" model="res.groups">
        <field name="name">Department Manager</field>       
        <field name="category_id" ref="module_category_kamil_inventory"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_finance_admin_manager" model="res.groups">
        <field name="name">Finance and Administration Manager</field>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        <field name="category_id" ref="module_category_kamil_inventory"/>
    </record>

    <record id="group_admin_manger" model="res.groups">
        <field name="name">Administration Manager</field>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        <field name="category_id" ref="module_category_kamil_inventory"/>
    </record>

    <record id="group_inventory_employee" model="res.groups">
        <field name="name">Inventory Employee</field>
        <field name="category_id" ref="module_category_kamil_inventory"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_inventory_responsible" model="res.groups">
        <field name="name">Inventory Responsible</field>
        <field name="category_id" ref="module_category_kamil_inventory"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

     <record id="group_inventory_responsible_hq" model="res.groups">
        <field name="name">Inventory Responsible - Head Quarter</field>
        <field name="category_id" ref="module_category_kamil_inventory"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_inventory_adjustment" model="res.groups">
        <field name="name">Inventory Adjustment</field>
        <field name="category_id" ref="module_category_kamil_inventory"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>
    <record id="group_indirect_receive" model="res.groups">
        <field name="name">Indirect Receive</field>
        <field name="category_id" ref="module_category_kamil_inventory"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>


    <!-- Rule-->
    <record id="need_request_company_rule" model="ir.rule">
        <field name="name">Need Request multi-company</field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|',('company_id','=',False),('company_id','child_of',[user.company_id.id])]</field>
    </record>

    <record id="need_request_personal_rule" model="ir.rule">
        <field name="name">Need Request Personal</field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('responsible_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="department_manager_rule" model="ir.rule">
        <field name="name">Need Request Department Manager </field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="domain_force">[('department_id.member_ids.user_id', 'in', [user.id]),('state','not in',['draft'])]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_ive_department_manager'))]"/>
    </record>

    <record id="need_request_finance_admin_manager" model="ir.rule">
        <field name="name">Need Request finance admin manager</field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="domain_force">[('state','not in',['draft','dept_manager'])]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_finance_admin_manager'))]"/>
    </record>

    <record id="need_request_admin_manager" model="ir.rule">
        <field name="name">Need Request admin manager</field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="domain_force">[('state','not in',['draft','dept_manager','finance_admin_manager'])]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_admin_manger'))]"/>
    </record>

    <record id="need_request_inventory_manager" model="ir.rule">
        <field name="name">Need Request inventory manager</field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="domain_force">[('state','not in',['draft','dept_manager','finance_admin_manager','admin_manger'])]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_inventory_responsible'))]"/>
    </record>

    <record id="need_request_inventory_employee" model="ir.rule">
        <field name="name">Need Request inventory employee</field>
        <field name="model_id" ref="model_need_requisition"/>
        <field name="domain_force">[('state','not in',['draft','dept_manager','finance_admin_manager','admin_manger','inventory_manager'])]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_inventory_employee'))]"/>
    </record>




    <!-- New Item-->
    <record id="add_item_personal_rule" model="ir.rule">
        <field name="name">add new item personal</field>
        <field name="model_id" ref="model_new_product"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('responsible','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

     <record id="add_item_hq_rule" model="ir.rule">
        <field name="name">add new item HQ</field>
        <field name="model_id" ref="model_new_product"/>
        <field name="domain_force">[(1,'=',1),('state','!=','draft')]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_inventory_responsible_hq'))]"/>
    </record>


    <!-- <record id="inv_purchase_request_personal_rule" model="ir.rule">
        <field name="name">Inventory Purchase Request Personal</field>
        <field name="model_id" ref="model_purchase_request"/>
        <field name="global" eval="True"/>
        <field name="domain_force">[('user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_inventory_employee'),(4, ref('kamil_inventory.group_inventory_responsible')))]"/>
    </record> -->


    <!-- Stock location-->
<!--     <record id="partner_stock_location_rule" model="ir.rule">
        <field name="name">partner stock location</field>
        <field name="model_id" ref="model_stock_location"/>
        <field name="domain_force">['|',('partner_id','=','False'),('partner_id','=',user.partner_id.id)]
        </field>
        <field name="groups" eval="[(4, ref('kamil_inventory.group_inventory_responsible')), (4, ref('kamil_inventory.group_inventory_employee'))]"/>
    </record> -->

    
</odoo>