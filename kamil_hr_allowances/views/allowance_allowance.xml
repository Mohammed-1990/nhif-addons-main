<odoo>
  <data>

      <record model="ir.ui.view" id="allowance_allowance_form_view">
        <field name="name">Allowance</field>
        <field name="model">allowance.allowance</field>
        <field name="arch" type="xml">
          <form>
            <header>
              <button type="object" name="compute_allowance_line" string="Compute Allowance" icon="fa-gears" colspan="2" attrs="{'invisible':[('state','!=','draft')]}" class="oe_highlight" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>
             
              <button name="do_submit" string="Send" type="object" class="btn btn-primary" states="draft" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>
             
              <button name="do_confirm" string="Submit" type="object" class="btn btn-primary" states="benefits_wages" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>
              
              <button name="do_personnel_confirm" string="Confirm" type="object" class="btn btn-primary" states="personnel" groups="kamil_hr_security.hr_employment_department_group,kamil_hr_security.hr_employment_department_hq_group"/>

              <button name="do_gd_confirm" string="Confirm" type="object" class="btn btn-primary" states="general_directorate" groups="kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_head_of_hr_dept_group"/>

              <button name="do_ia_confirm" string="Approve" type="object" class="btn btn-primary" states="internal_auditor" groups="kamil_hr_security.hr_internal_auditor_group"/>

              <button name="do_return" string="Returnn" type="object" states="benefits_wages" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>

              <button name="do_return1" string="Return1" type="object" states="personnel" groups="kamil_hr_security.hr_employment_department_group,kamil_hr_security.hr_employment_department_hq_group"/>

              <button name="do_return2" string="Return2" type="object" states="general_directorate" groups="kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_head_of_hr_dept_group" />

              <button name="do_return3" string="Return3" type="object" states="internal_auditor" groups="kamil_hr_security.hr_internal_auditor_group"/>

              <field name="state" widget="statusbar"/>
            </header>
            <sheet>
            <h1>
              <field name="name" placeholder="Description" attrs="{'readonly':[('state','!=','draft')]}" autocomplete="off"/>
            </h1>
            <group col="4">
              <field name="date" attrs="{'readonly':[('state','!=','draft')]}"/>
              <field name="config_id" attrs="{'readonly':[('state','!=','draft')]}" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
              <field name="stamp" attrs="{'readonly':[('state','!=','draft')]}" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
              <field name="total_amount"/>
            </group> 
            <group>
              <group>
                <field name="eligible" attrs="{'readonly':[('state','!=','draft')]}"/>
                <field name="company_ids" attrs="{'invisible':[('eligible','!=','branchs')],'required':[('eligible','=','branchs')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" string='Branchs' options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="employee_ids" attrs="{'invisible':[('eligible','!=','employees')],'required':[('eligible','=','employees')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="department_ids" attrs="{'invisible':[('eligible','!=','departments')],'required':[('eligible','=','departments')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="appointment_type_ids" attrs="{'invisible':[('eligible','!=','appointment_types')], 'required':[('eligible','=','appointment_types')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="degree_ids" attrs="{'invisible':[('eligible','!=','degree')], 'required':[('eligible','=','degree')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="branch_id" attrs="{'readonly':[('state','!=','draft')]}" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
              </group>
            </group>

            <notebook>
            <page string="Details">
                  <field name="line_ids" attrs="{'readonly':[('state','!=','draft')]}">
                    <tree  editable="bottom">
                      <field name="employee_id"/>
                      <field name="department_id" force_save="1"/>
                      <field name="degree_id" force_save="1"/>
                      <field name="marital" force_save="1"/>
                      <field name="from_salary" force_save="1" sum="From salary"/>
                      <field name="amount" force_save="1" sum="Amount"/>
                      <field name="no_months" force_save="1"/>
                      <field name="stamp"  force_save="1" sum="Stamp"/>
                      <field name="net" force_save="1" sum="net"/>
                    </tree>
                  </field>
            </page> 
            <page string="Notes">
              <div>
                <field name="notes"/>
              </div>
            </page>

        </notebook>  

             
            </sheet>
            <div class="oe_chatter">
                  <field name="message_follower_ids" widget="mail_followers"/>
                  <field name="activity_ids" widget="mail_activity"/>
                  <field name="message_ids" widget="mail_thread"/>
              </div> 
          </form>
        </field>
      </record>

    

    <record model="ir.ui.view" id="allowance_allowance_tree_view">
    <field name="name">Allowances</field>
    <field name="model">allowance.allowance</field>
      <field name="arch" type="xml">
          <tree>
              <field name="name"/>
              <field name="date"/>
              <field name="total_amount"/>
              <field name="state"/>
          </tree>
        </field>
      </record>

  
    <record  id="action_allowance_allowance" model="ir.actions.act_window">
      <field name="name">Allowances</field>
      <field name="res_model">allowance.allowance</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
    </record>


    <menuitem name="Allowances" id="menu_allowance_allowance" action="action_allowance_allowance" parent="hr_allowance_main_menu" sequence="0" 
      groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_head_of_hr_dept_group,kamil_hr_security.hr_internal_auditor_group,kamil_hr_security.hr_employment_department_group,kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_management_group,kamil_hr_security.hr_branch_manager_group,kamil_hr_security.hr_general_manager_group,kamil_hr_security.hr_benefits_wages_section_hq_group"
      />


    <record model="ir.ui.view" id="allowance_allowance_config_form_view">
    <field name="name">Allowances Config</field>
    <field name="model">allowance.allowance.config</field>
    <field name="arch" type="xml">
        <form>
          <sheet>
            <div class="oe_button_box" name="button_box">
                <button name="toggle_active" type="object" 
                        class="oe_stat_button" icon="fa-archive" groups="kamil_hr_security.hr_benefits_wages_section_group">
                    <field name="is_active" widget="boolean_button"
                            options='{"terminology": "archive"}'/>
                </button>
            </div>
         
            <h1>
              <field name="name" placeholder="Description" autocomplete="off"/>
            </h1>
            <group>
              <group>
                <field name="central" groups="kamil_hr_security.hr_benefits_wages_section_hq_group"/>
              </group>
            </group>
            <notebook>
              <page string="Details" >
                  <field name="line_ids" >
                    <tree  editable="bottom">
                      <field name="degree_id" widget="many2many_tags"  options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                      <field name="marital_status"/>
                      <field name="marital" attrs="{'readonly':[('marital_status','=',False)], 'required':[('marital_status','=',True)]}"/>
                      <field name="salary_rule_id" options="{'no_create':True,'no_edit':True,'no_open':True}" widget="many2many_tags" />
                      <field name="no_months"/>
                    </tree>
                  </field>
              </page> 
              <page string="Accounting">
                <group col="4">
                    <field name="account_id" options="{'no_edit':True,'no_create':True,'no_open':True}" required="True"/>
                    <field name="stamp" options="{'no_edit':True,'no_create':True,'no_open':True}" required="True"/>
                </group>
              </page>
            </notebook>  
          </sheet>
          <div class="oe_chatter">
                  <field name="message_follower_ids" widget="mail_followers"/>
                  <field name="activity_ids" widget="mail_activity"/>
                  <field name="message_ids" widget="mail_thread"/>
              </div>
        </form>
      </field>
    </record>

    

    <record model="ir.ui.view" id="allowance_allowance_config_tree_view">
    <field name="name">Allowance Config</field>
    <field name="model">allowance.allowance.config</field>
      <field name="arch" type="xml">
          <tree>
              <field name="name"/>
              <field name="is_active"/>
          </tree>
        </field>
      </record>

  
    <record  id="action_allowance_allowance_config" model="ir.actions.act_window">
      <field name="name">Allowance Config</field>
      <field name="res_model">allowance.allowance.config</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
    </record>


    <menuitem name="Allowance Config" id="menu_allowance_allowance_config" action="action_allowance_allowance_config" parent="hr_allowance_main_menu" sequence="20" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_head_of_hr_dept_group,kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_management_group,kamil_hr_security.hr_branch_manager_group,kamil_hr_security.hr_general_manager_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>


  </data>
</odoo>