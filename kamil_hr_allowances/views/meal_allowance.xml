<odoo>
  <data>

    <record model="ir.ui.view" id="meal_allowance_form_view">
    <field name="name">Meal Allowance</field>
    <field name="model">meal.allowance</field>
    <field name="arch" type="xml">
          <form>
            <header>
              <button type="object" name="compute_allowance_line" string="Compute Allowance" icon="fa-gears" colspan="2" attrs="{'invisible':[('state','!=','draft')]}" class="oe_highlight" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>

              <button type="object" name="update_allowance_line" string="Update Allowance" icon="fa-gears" attrs="{'invisible':[('state','!=','draft')]}" class="oe_highlight" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>

              <button name="do_submit" string="Send" type="object" class="btn btn-primary" states="draft" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>

              <button name="do_confirm" string="Submit" type="object" class="btn btn-primary" states="benefits_wages" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>

              <button name="do_personnel_confirm" string="Confirm" type="object" class="btn btn-primary" states="personnel" groups="kamil_hr_security.hr_employment_department_group,kamil_hr_security.hr_employment_department_hq_group"/>

              <button name="do_gd_confirm" string="Confirm" type="object" class="btn btn-primary" states="general_directorate" groups="kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_head_of_hr_dept_group"/>

              <button name="do_ia_confirm" string="Approve" type="object" class="btn btn-primary" states="internal_auditor" groups="kamil_hr_security.hr_internal_auditor_group"/>

              <button name="do_return" string="Return1" type="object" states="benefits_wages" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>

              <button name="do_return1" string="Return11" type="object" states="personnel" groups="kamil_hr_security.hr_employment_department_group,kamil_hr_security.hr_employment_department_hq_group"/>

              <button name="do_return2" string="Return2" type="object" states="general_directorate" groups="kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_head_of_hr_dept_group"/>

              <button name="do_return3" string="Return3" type="object" states="internal_auditor" groups="kamil_hr_security.hr_internal_auditor_group"/>


              <field name="state" widget="statusbar"/>
            </header>
            <sheet>
            <h1>
              <field name="name" placeholder="Meal allowance for month jan" attrs="{'readonly':[('state','!=','draft')]}" required="True"/>
            </h1>
            <group col="4">
              <field name="date_from" attrs="{'readonly':[('state','!=','draft')]}" required="True"/>
              <field name="date_to" attrs="{'readonly':[('state','!=','draft')]}" required="True"/>
              <field name="amount" attrs="{'readonly':[('state','!=','draft')]}"/>
              <field name="deduction_amount" attrs="{'readonly':[('state','!=','draft')]}"/>
              <field name="stamp" attrs="{'readonly':[('state','!=','draft')]}" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
              <field name="total_amount"/>
            </group> 
            <group>
              <group>
                <field name="eligible" attrs="{'readonly':[('state','!=','draft')]}" required="True"/>
                <field name="company_ids" attrs="{'invisible':[('eligible','!=','branchs')],'required':[('eligible','=','branchs')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" string='Branchs' options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="employee_ids" attrs="{'invisible':[('eligible','!=','employees')],'required':[('eligible','=','employees')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="department_ids" attrs="{'invisible':[('eligible','!=','departments')],'required':[('eligible','=','departments')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
                <field name="appointment_type_ids" attrs="{'invisible':[('eligible','!=','appointment_types')], 'required':[('eligible','=','appointment_types')],'readonly':[('state','!=','draft')]}" widget="many2many_tags" options="{'no_create':True,'no_edit':True,'no_open':True}"/>
              </group>
            </group>

            <notebook>
            <page string="Details">
                  <field name="line_ids" attrs="{'readonly':[('state','!=','draft')]}">
                    <tree  editable="bottom">
                      <field name="employee_id" required="True"/>
                      <field name="amount" sum="amount"/>
                      <field name="days_leave" />
                      <field name="discount" force_save="1" sum="discount"/>
                      <field name="receivable" force_save="1" sum="receivable"/>
                      <field name="deductions" sum="deductions"/>
                      <field name="stamp"  force_save="1" sum="stamp"/>
                      <field name="total_deductions"  force_save="1" sum="Total Deductions"/>
                      <field name="total" force_save="1" sum="total"/>
                      <field name="net" force_save="1" sum="net"/>
                      <field name="account_number"/>
                    </tree>
                  </field>
            </page> 
            <page string="Notes">
              <div>
                <field name="notes"/>
              </div>
            </page>

        </notebook>  

             
            </sheet>
            <div class="oe_chatter">
                  <field name="message_follower_ids" widget="mail_followers"/>
                  <field name="activity_ids" widget="mail_activity"/>
                  <field name="message_ids" widget="mail_thread"/>
              </div> 
          </form>
        </field>
      </record>

    

    <record model="ir.ui.view" id="meal_allowance_tree_view">
    <field name="name">Meal Allowance</field>
    <field name="model">meal.allowance</field>
      <field name="arch" type="xml">
          <tree>
            
              <field name="name"/>
              <field name="date_from"/>
              <field name="date_to"/>
              <field name="total_amount"/>
              <field name="state"/>
             
          </tree>
        </field>
      </record>

  
    <record  id="action_meal_allowance" model="ir.actions.act_window">
      <field name="name">Meal Allowance</field>
      <field name="res_model">meal.allowance</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      
    </record>


    <menuitem name="Meal Allowance" id="menu_meal_allowance" action="action_meal_allowance" parent="hr_allowance_main_menu" sequence="1" groups="kamil_hr_security.hr_benefits_wages_section_group,kamil_hr_security.hr_head_of_hr_dept_group,kamil_hr_security.hr_internal_auditor_group,kamil_hr_security.hr_employment_department_group,kamil_hr_security.hr_general_department_group,kamil_hr_security.hr_management_group,kamil_hr_security.hr_branch_manager_group,kamil_hr_security.hr_general_manager_group,kamil_hr_security.hr_benefits_wages_section_hq_group"/>


  </data>
</odoo>