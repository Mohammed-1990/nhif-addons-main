<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	
	<!-- Revenues Budget Report-->
	<report 
		id="expenses_budget_items_budget_report"
		model="expenses.items.budget.wizard"
		string="Expenses Budget Items Report"
		report_type="qweb-html"
		name="kamil_accounting_budget.expenses_budget_items_template"
	/>


	<!-- Expenses Budget Template-->
	<template id="expenses_budget_items_template">
		<t t-call="web.external_layout">
			<t t-call="web.html_container">
				<div class="page">


					<div dir="rtl" style="float:right;text-align:start;">
						<a href="#" target="_blank">
							<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor">
								<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
								<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
								<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
							</svg>
						</a>
					</div>
					<br/>
					<br/>



						<div class="text-center" style="font:500;">
							<p>تقرير بنود الموازنة في الصرف<br/>
							 من <t t-esc="date_from"/> الى <t t-esc="date_to"/> </p>
					</div><br/>

					<div dir="rtl" style="font:500;">
                        <p>
                        	<t t-if="len(selected_company_names) == 1">
                        		الفرع :
                        	</t>

                        	<t t-if="len(selected_company_names) &gt; 1">
                        		الفروع :
                        	</t>
                        	<t t-foreach="selected_company_names" t-as="company_name">
                        		<t t-esc="company_name"/>,
                        	</t>
                        </p>
                    </div>
					
					<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">
                    <thead class="table-active" style="display: table-header-group;">
                        	<tr class="table-active">
								<th class="text-center fit">#</th>
								<th class="text-center fit">بند الموازنة</th>
								<th class="text-center fit">القيمة المصدقة</th>
								<th class="text-center fit">القيمة المسحوبة</th>
								<th class="text-center fit">المتبقي</th>
								<th class="text-center fit">النسبة</th>
							</tr>
                        </thead>
                        <tbody>
	                        <t t-foreach="data_rows" t-as="row">
	                        	<tr style="page-break-inside: avoid;" >
	                        		<td class="text-center">
            									  	<t t-esc="row_index + 1"/>
            									</td>
	                        		<td class="text-left fit" style="width:40%;">
	                        			<a data-toggle="collapse" t-attf-href="#col#{row['account_id']}" >
	                                    	<t t-esc="row['account_name']"/> 
	                                    </a>
	                                </td>

	                                <td class="text-center fit">
	                                		<t t-esc="row['annual_budget_value']"/>
	                                </td>
	                                <td class="text-center fit">
	                                		<t t-esc="row['actual_value']"/>
	                                </td>
	                                <td class="text-center fit">
	                                		<t t-esc="row['remaining_value']"/>
	                                </td>
	                                <td class="text-center fit">
	                                		<t t-esc="row['percentage']"/>%
	                                </td>
	                            </tr>

	                            <tr class="collapse out" t-attf-id="col#{row['account_id']}">
									<t t-foreach="row['branches_rows']" t-as="branch_line">
										<tr class="collapse out" t-attf-id="col#{row['account_id']}">
											<td/>
											<td >
													<strong>
													<t t-esc="branch_line['branch_name']"/>
													</strong>
													<t t-esc="branch_line['account_name']"/>
											</td>
											<td>
												<t t-esc="branch_line['annual_budget_value']"/>
											</td>

											<td>
												<t t-esc="branch_line['actual_value']"/>
											</td>
											<td>
												<t t-esc="branch_line['remaining_value']"/>
											</td>
											<td>
												<t t-esc="branch_line['percentage']"/>%
											</td>
										</tr>
									</t>
								</tr>
	                        </t>
	                        <tr class="table-active"  style="page-break-inside: avoid;">
	                        	<th class="text-center" colspan="2">
	                        			الإجمالي
	                        	</th>

	                        	<th class="text-center">
	                        			<t t-esc="total_annual_budget_value"/>
	                        	</th>

	                        	<th class="text-center">
	                        			<t t-esc="total_actual_value"/>
	                        	</th>

	                        	<th class="text-center">
	                        			<t t-esc="total_remaining_value"/>
	                        	</th>

	                        	<th class="text-center">
	                        			<t t-esc="total_percentage"/>%
	                        	</th>

	                        </tr>
	                    </tbody>
                    </table>
				</div>
			</t>
		</t>
	</template>

</odoo>

