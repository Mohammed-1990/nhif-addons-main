<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	
	<!--compare Revenues Report-->
	<report 
		id="compare_revenues_report"
		model="revenues.budget.wizard"
		string="Compare Revenues Report"
		report_type="qweb-html"
		name="kamil_accounting_reports.compare_revenues_template"
	/>
		<!-- paperformat="kamil_accounting_reports.paperformat_a4_landscap" -->


	<!--Compare Revenues Template-->
	<template id="compare_revenues_template">
		<t t-call="web.html_container">

				<div class="page">
					<div class="text-center">
						<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
					</div>
					<br/><br/>

					<div dir="rtl" style="float:right;text-align:start;">
						<a href="#" target="_blank">
							<svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
								<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
								<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
							</svg>
						</a>
					</div>
					<br/>

					<div class="text-center" >
					    <strong>
	  					   <p>
								<b>تقرير مقارنة الايرادات خلال فترات مختلفة</b>
							</p>				
						</strong>
					</div>

					<br/>
					
					<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">
						<thead style="display: table-header-group;">
							<tr class="table-active">
								<td class="text-center fit"></td>
								<td colspan="3" class="text-center fit" > 
									الفترة الحالية
									<br/>
									من <t t-esc="date_from"/> الى <t t-esc="date_to"/>
								</td>
								<td colspan="3" class="text-center fit"> 
									الفترة السابقة
									<br/>
									من <t t-esc="date_from2"/> الى <t t-esc="date_to2"/>
								</td>
								<td class="text-center fit"></td>
								<td class="text-center fit"></td>
							</tr>
							<tr class="table-active">
								<td class="text-center fit">م</td>
								<td class="text-center fit">البند</td>
								<td class="text-center fit">الربط خلال الفترة الحالية</td>
								<td class="text-center fit">المتحصل خلال الفترة الحالية</td>
								<td class="text-center fit">نسبة التحصيل في الفترة الحالية</td>
								<td class="text-center fit">الربط خلال الفترة السابقة</td>
								<td class="text-center fit">المتحصل خلال الفترة السابقة</td>
								<td class="text-center fit">نسبة التحصيل في الفترة السابقة</td>
								<td class="text-center fit">المقارنة بالنسب</td>
							</tr>
						</thead>
						<tbody>
							<t t-foreach="docs" t-as="doc">

								<tr style="page-break-inside: avoid;">

									<td class="text-center fit">
										<t t-esc="doc_index + 1"/>
									</td>
									<td class="text-right fit">
										<t t-esc="doc['item']"/>
									</td>
									<td class="text-right fit">
										<t t-esc="'{0:,.2f}'.format(float(doc['planned_amount1']))"/>

									</td>
									<td class="text-right fit">
										<!-- <t t-esc="'{0:,.2f}'.format(float(doc['practical_amount1']))"/> -->
										<t t-esc="doc['str_actual_expense1']"/>
									</td>
									<td class="text-right fit">			
										<t t-esc="'{0:,.2f}'.format(float(doc['percentege']))"/>
									</td>
									<td class="text-right fit">
										<t t-esc="'{0:,.2f}'.format(float(doc['planned_amount2']))"/>
									</td>
									<td class="text-right fit">
										<!-- <t t-esc="'{0:,.2f}'.format(float(doc['practical_amount2']))"/> -->
										<t t-esc="doc['str_actual_expense2']"/>

									</td>
									<td class="text-right fit">
										<t t-esc="'{0:,.2f}'.format(float(doc['percentege2']))"/>
									</td>
									<td class="text-right fit">
										<t t-esc="'{0:,.2f}'.format(float(doc['compare_percentage']))"/>
									</td>
								</tr>

							</t>
							<tr>
                        		<th colspan="2"><b>الاجمالي</b></th>
                        		<td class="text-center fit">

                        			<t t-set="total_planned_1" t-value="sum([p['planned_amount1'] for p in docs])"/>
                        			
                        			<t t-esc="'{0:,.2f}'.format(float( total_planned_1 ))"/>


                        		</td>
                        		<td class="text-center fit">
                        			
									<!-- <t t-esc="'{0:,.2f}'.format( float(sum([p['practical_amount1'] for p in docs]) ) )"/> -->

									<t t-set="total_practical_1" t-value="sum([p['practical_amount1'] for p in docs])"/>

									<t t-if="total_practical_1 &lt; 0">
										(<t t-esc=" '{0:,.2f}'.format( float(abs(total_practical_1) ))  "/>)
									</t>

									<t t-if="total_practical_1 &gt; 0 or total_practical_1 == 0">
										<t t-esc=" '{0:,.2f}'.format( float(total_practical_1 ))"/>
									</t>

                        		</td>
                        		<td class="text-center fit">

                        			<t t-if="total_planned_1 &gt; 0">
                        				<t t-esc="'{0:,.2f}'.format(float( total_practical_1 / total_planned_1 * 100 ))"/>%
                        			</t>

                        			<t t-if="total_planned_1 &lt; 0 or total_planned_1 == 0">
                        				0%
                        			</t>





                        		</td>
                        		<td class="text-center fit">
                        			
                        			<!-- <t t-esc="'{0:,.2f}'.format(float(sum([p['planned_amount2'] for p in docs])))"/> -->

                        			<t t-set="total_planned_2" t-value="sum([p['planned_amount2'] for p in docs])"/>
                        			
                        			<t t-esc="'{0:,.2f}'.format(float(total_planned_2))"/>

                        		</td>
                        		<td class="text-center fit">
                        			
                        			<!-- <t t-esc="'{0:,.2f}'.format(float(sum([p['practical_amount2'] for p in docs])))"/> -->

									<t t-set="total_practical_2" t-value="sum([p['practical_amount2'] for p in docs])"/>

									<t t-if="total_practical_2 &lt; 0">
										(<t t-esc=" '{0:,.2f}'.format( float(abs(total_practical_2) ))  "/>)
									</t>

									<t t-if="total_practical_2 &gt; 0 or total_practical_2 == 0">
										<t t-esc=" '{0:,.2f}'.format( float(total_practical_2 ))"/>
									</t>



                        		</td>
                        		<td class="text-center fit">
                        			<t t-if="total_planned_2 &gt; 0">
                        				<t t-esc="'{0:,.2f}'.format(float( total_practical_2 / total_planned_2 * 100 ))"/>%
                        			</t>

                        			<t t-if="total_planned_2 &lt; 0 or total_planned_2 == 0">
                        				0%
                        			</t>

                        		</td>
                        		<td class="text-center fit">
                        			<!-- <t t-esc="sum([p['compare_percentage'] for p in docs])" /> -->

                        			<!-- <t t-esc="'{0:,.2f}'.format(float(sum([p['compare_percentage'] for p in docs])))"/> -->
                        		</td>
                        	</tr>
						</tbody>
					</table>
				</div>
			</t>
	</template>


</odoo>