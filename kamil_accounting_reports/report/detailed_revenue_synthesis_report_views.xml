<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	
	<!-- Revenues Analysis subgroups Report-->
	<report 
		id="detail_rev_report"
		model="detailed.revenues.synthesis.wizard"
		string="Detailed Revenues Synthesis Report"
		report_type="qweb-html"
		name="kamil_accounting_reports.detail_rev_temp"
		paperformat="kamil_accounting_reports.paperformat_a3_landscape"
	/>


	<!-- Revenues Analysis Subgroup Report Template-->
	<template id="detail_rev_temp">

		<t t-call="web.html_container">
                <div class="page">
					<div class="text-center">
					<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
					</div>
					<br/><br/>
					<div dir="rtl" style="float:right;text-align:start;">
						<a href="#" target="_blank">
							<svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
								<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
								<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
							</svg>
						</a>
					</div>
					<br/>
							

					<div class="text-center">
                        <strong>
                           <p>
							<b>تقرير الايرادات تفصيلي تجميعي</b>
							<br/>
							للفترة من <t t-esc="date_from"/>
							الي <t t-esc="date_to"/>
							</p>
						</strong>
					</div>

					<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">
                        <thead style="display: table-header-group;">
                            <tr class="table-active">
                                <td class="text-center fit" rowspan="2">
									الرقم
								</td>
                                <td class="text-center fit" rowspan="2">
									البند
								</td>
								<t t-foreach="company_names_ids" t-as="company_line">

									<td class="text-center fit" colspan="3">
										<t t-esc="company_line['company_name']"/>
									</td>
								</t>
								<td class="text-center fit"  colspan="3">
									<strong>
										الإجمالي
									</strong>
								</td>
							</tr>

							<tr class="table-active">
								<t t-foreach="company_names_ids" t-as="company_line">
									<td class="text-center fit">
										الربط المقدر
									</td>
									<td class="text-center fit">
										المتحصل الفعلي
									</td>
									<td class="text-center fit">
										النسبة
									</td>
								</t>

								<td class="text-center fit">
									<strong>
										الربط المقدر
									</strong>
								</td>
								<td class="text-center fit">
									<strong>
										المتحصل الفعلي
									</strong>
								</td>
								<td class="text-center fit">
									<strong>
										النسبة
									</strong>
								</td>
							</tr>


						</thead>
						<tbody>
							<t t-set="count" t-value="1" />
							
							<t t-foreach="accounts_names_codes" t-as="account_line">

							    <tr style="page-break-inside: avoid;">
	                                

	                                <td class="text-center fit">
	                                	
	                                    <t class="text-center fit" t-esc="count" />
	                                    <t t-set="count" t-value="count + 1" />
	                                	
	                                </td>

	                                <td class="text-right fit">
	                                    <t class="text-right fit" t-esc="account_line['account_code']  + '  ' + account_line['account_name']" />
	                                </td>

	                                <t t-foreach="company_names_ids" t-as="company_line">
		                                
	                                	<td class="text-right fit">
		                                	<t class="text-right fit" t-esc="budget_rows[account_line['account_code']][company_line['company_id']]" />
		                                	
		                                </td>

		                                <td class="text-right fit">
		                                    <t class="text-right fit" t-esc="data_rows[account_line['account_code']][company_line['company_id']]" />
		                                </td>

	                                	<td class="text-right fit">
		                                	<t class="text-right fit" t-esc="percentage_rows[account_line['account_code']][company_line['company_id']]" />%
		                                </td>
		                            </t>

		                            <td class="text-right fit">
	                                	<strong>
	                                	<t t-esc="'{:,.2f}'.format( budget_account_total[account_line['account_code']] )"/>
	                                	</strong>
	                                </td>

		                            <td class="text-right fit">
	                                	<strong>
	                                    <t class="text-right fit" t-esc="'{:,.2f}'.format( account_total[account_line['account_code']] )"/>
	                                	</strong>
		                            </td>


		                            <td class="text-right fit">
	                                	<strong>
	                                	<t class="text-right fit" t-esc="'{:,.2f}'.format( percentage_account_total[account_line['account_code']] )"/>%
	                                	</strong>
	                                </td>

	                            </tr>
							</t>

							<tr class="table-active">
								<td colspan="2" class="text-center">
									الإجمالي
								</td>
								<t t-foreach="company_names_ids" t-as="company_line">
									<td>
										<t t-esc="'{:,.2f}'.format( budget_company_total[company_line['company_id']] )"/>
									</td>
									<td>
										<t t-esc="'{:,.2f}'.format( company_total[company_line['company_id']] )"/>
									</td>
									<td>
										<t t-esc="'{:,.2f}'.format( percentage_company_total[company_line['company_id']] )"/>%
										
									</td>
								</t>

								<td>
									<strong>
										<t t-esc="'{:,.2f}'.format( all_budget_total )"/>
									</strong>
								</td>
								<td>
									<strong>
										<t t-esc="'{:,.2f}'.format( all_companies_total )"/>
									</strong>
								</td>
								<td>
									<strong>
										<t t-esc="'{:,.2f}'.format( all_percentage_total )"/>%
									</strong>
								</td>
							</tr>


						</tbody>
					</table>
                    
                </div>
			</t>
	</template>


</odoo>