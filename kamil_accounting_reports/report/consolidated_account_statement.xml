<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	

	<report 
		id="consolidated_account_statement_report"
		model="consolidated.group.statement.wizard"
		string="Consolidated Account Statement"
		report_type="qweb-html"
		name="kamil_accounting_reports.consolidated_a_stm_temp"
	/>

	<template id="consolidated_a_stm_temp">
		

            <t t-call="web.html_container">
                <div class="page">
                    <div class="text-center">
						<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
					</div>
					<br/><br/>
                
                 <div dir="rtl" style="float:right;text-align:start;">
                    <a href="#" target="_blank">
                    <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
                      <path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
                      <path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                    </svg>
                    </a>
                </div>
                <br/><br/>

                    
                    <div class="text-center">
                        <strong>
                            تقرير كشف حساب
                            <br/>
                            للفترة من <t t-esc="date_from"/>
                            الى <t t-esc="date_to"/>
                        </strong>
                    </div>
                    <div dir="rtl" style="float:right;text-align:start;">


                        <strong>
                            <br/>
                            إسم الحساب : <t t-esc="account_name"/>
                        </strong>
                        <br/>
                        <t t-if="account_type in ['assets','liabilities']">
                            <strong>
                                الرصيد الإفتتاحي : <t t-esc="total_opening_balance"/>
                            </strong>
                        </t>

                        <t t-if="account_type == 'revenues'">
                            <strong>
                                الربط المقدر : <t t-esc="total_budget_value"/>
                            </strong>
                        </t>

                        <t t-if="account_type == 'expenses'">
                            <strong>
                                المبلغ المصدق : <t t-esc="total_budget_value"/>
                            </strong>
                        </t>
                        <strong>
                            <br/>
                            <t t-if="len(selected_company_names) == 1">
                                الفرع :
                            </t>

                            <t t-if="len(selected_company_names) > 1">
                                الفروع :
                            </t>
                            <t t-foreach="selected_company_names" t-as="company_name">
                                <t t-esc="company_name"/>,
                            </t>
                        </strong>
                    </div>

                        <div class="text-center">
                        <table dir="rtl" border="1" class="text-right  table-bordered" style="float:right;text-align:start;">
                            <thead>
                                <tr style="page-break-inside: avoid;" class="table-active">
                                    
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        م.
                                    </td>
                                    <t t-if="companies_len > 1">
                                        <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            الفرع
                                        </td>
                                    </t>
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        التاريخ
                                    </td>
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        نوع المستند
                                    </td>
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        رقم المستند
                                    </td>
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        المدين
                                    </td>
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        الدائن
                                    </td>
                                    <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        البيان
                                    </td>
                                    <t t-if="companies_len > 1">
                                        <td class="text-center fit" style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            إجمالي الفرع
                                        </td>
                                    </t>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="count" t-value="1"/>


                                <t t-foreach="docs" t-as="doc">

                                    <tr style="page-break-inside: avoid;">
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            <div style="float:right;text-align:start;">
                                            <t class="text-center fit" t-esc="count"/>
                                            <t t-set="count" t-value="count + 1"/>
                                            </div>
                                        </td>
                                        <t t-if="companies_len > 1">
                                            
                                            <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                                <div style="float:right;text-align:start;">
                                                 
                                                <t class="text-center" t-esc="doc['branch']"/>
                                                </div>
                                            </td>
                                        </t>
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            <div style="float:right;text-align:start;">
                                            <t class="text-center" t-esc="doc['date']"/>
                                            </div>
                                        </td>
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            <div style="float:right;text-align:start;">
                                            <t class="text-center" t-esc="doc['document_type']"/>
                                            </div>
                                        </td>
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            
                                            <div style="float:right;text-align:start;">
                                            <t class="text-center" t-esc="doc['document_number']"/>
                                            </div>
                                        </td>
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            <div style="float:right;text-align:start;">
                                            <t class="text-center" t-esc="doc['debit']"/>
                                            </div>
                                        </td>
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            <div style="float:right;text-align:start;">
                                            <t class="text-center" t-esc="doc['credit']"/>
                                            </div>
                                        </td>
                                       
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                            
                                        <div class="dropdown">
                                            <a class=" dropdown-toggle"  t-attf-href="#col#{doc['move_id']}"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="float:right;text-align:start;">
                                                <div style="float:right;text-align:start;">
                                                <t class="text-center" t-esc="doc['description']"/>
                                                </div>
                                            </a>

                                            <div class="dropdown-menu"  t-attf-aria-labelledby="#col#{doc['move_id']}" style="float:right;text-align:start;">
                                            
                                            <t t-if="doc['payment_id']">
                                                <a class="dropdown-item"  t-attf-href="/web#id=#{doc['payment_id']}&amp;model=ratification.payment&amp;view_type=form" target="_blank">الدفعية</a>
                                            </t>
                                            
                                            <t t-if="doc['collection_id']">
                                                <a class="dropdown-item" t-attf-href="/web#id=#{doc['collection_id']}&amp;model=collection.collection&amp;view_type=form" target="_blank">التحصيل</a>
                                            </t>


                                            <t t-if="doc['money_movement_id']">
                                                <a class="dropdown-item" t-attf-href="/web#id=#{doc['money_movement_id']}&amp;model=money.movement&amp;view_type=form" target="_blank">حركة نقود</a>
                                            </t>




                                            <a class="dropdown-item" t-attf-href="/web#id=#{doc['move_id']}&amp;model=account.move&amp;view_type=form"  target="_blank">القيد</a>
                                          </div>

                                        </div>

                                        </td>
                                        <t t-if="companies_len > 1">
                                            <t t-if="not doc['is_state_total_added'] ">
                                                <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" t-att-rowspan="state_account_count_dict[ doc['branch_id'] ]">
                                                    <strong>
                                                        <div style="float:right;text-align:start;">
                                                        <t t-esc="branch_total_dict[ doc['branch_id'] ]"/>
                                                        </div>
                                                    </strong>
                                                </td>
                                                
                                            </t>
                                        </t>
                                     
                                    </tr>
                                </t>

                                <tr style="page-break-inside: avoid;" class="table-active">
                                    
                                    <t t-if="companies_len > 1">
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" colspan="5">
                                            <t class="text-center fit">
                                                الاجمالي
                                            </t>
                                            
                                        </td>
                                    </t>
                                    <t t-if="companies_len == 1">
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" colspan="4">
                                            <t class="text-center fit">
                                                الاجمالي
                                            </t>
                                            
                                        </td>
                                    </t>

                                    <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        <t class="text-center fit">
                                            <t t-esc="total_total_debit"/>
                                            
                                        </t>
                                    </td>

                                    <td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
                                        <t class="text-center fit">
                                            <t t-esc="total_total_credit"/>
                                        </t>
                                    </td>
                                    <td></td>
                                    <t t-if="companies_len > 1">
                                        
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" class="text-center fit">
                                            <t t-esc="total_total_balance"/>
                                        </td>
                                    </t>
                                    
                                </tr>
                                <tr style="page-break-inside: avoid;" class="table-active">
                                    <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" colspan="5">
                                        <t class="text-center fit">
                                            صافي المدة
                                        </t>

                                    </td>
                                    <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" colspan="5">
                                        <t class="text-center fit">
                                            <t t-esc="total_period_net"/>
                                        </t>
                                    </td>
                                </tr>
                                <t t-if="account_type in ['assets','liabilities']">

                                    <tr style="page-break-inside: avoid;" class="table-active">
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" colspan="5">
                                            <t class="text-center fit">
                                                الرصيد
                                            </t>

                                        </td>
                                        <td style="font:300; white-space: nowrap;width: 1%; padding:5px;" colspan="5">
                                            <t class="text-center fit">
                                                <t t-esc="total_total_balance"/>
                                            </t>
                                        </td>
                                    </tr>
                                </t>
                                
                            </tbody>

                        </table>
                        </div>
                        .
                        <br/><br/>

                        <script>
                            odoo.define('kamil_accounting_reports.account_statement', function (require) {
                                "use strict";

                                document.getElementById("test_link").addEventListener("click", function(){
                                    
                                    console.dir(this);
                                    alert('Name CLick');

                                });




                            });
                        </script>


				</div>
			</t>
	</template>

</odoo>
