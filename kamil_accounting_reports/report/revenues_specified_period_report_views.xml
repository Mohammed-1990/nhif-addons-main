<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	
	<report 
		id="revenues_specified_period_report"
		model="revenues.specified.period.wizard"
		string="Revenues Specified Period Report"
		report_type="qweb-html"
		name="kamil_accounting_reports.revenues_period_template"
	/>


	<template id="revenues_period_template">
		<t t-call="web.html_container">
				<div class="page">
					<div class="text-center">
					<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
					</div>
					<br/><br/>
					<div dir="rtl" style="float:right;text-align:start;">
						<a href="#" target="_blank">
							<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor">
								<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
								<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
								<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
							</svg>
						</a>
					</div>
					<br/>
					<br/>
					<div class="text-center">
					    <strong>
	  					   <p>
	  					     تقرير الايرادات في الفترة<br/>
	  					     من <t t-esc="date_from"/> الى <t t-esc="date_to"/> 
	  					   </p>
  					 	</strong>
					</div>

					<br/><br/>
					<div dir="rtl" style="float:right;text-align:start;">
                        <strong>
                        	<t t-if="len(selected_company_names) == 1">
                        		الفرع :
                        	</t>

                        	<t t-if="len(selected_company_names) &gt; 1">
                        		الفروع :
                        	</t>
                        	<t t-foreach="selected_company_names" t-as="company_name">
                        		<t t-esc="company_name"/>,
                        	</t>
                        </strong>
                        <br/>
                    </div>
					
					<br/>
            <table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">    
            	<thead style="display: table-header-group;">
                	<tr class="table-active">
						<th class="text-center fit">م</th>
						<th class="text-center fit">البند</th>
						<th class="text-center fit">الربط السنوي المقدر</th>
						<th class="text-center fit">الربط المقدر</th>
						<th class="text-center fit">المتحصل الفعلي</th>
						<th class="text-center fit">الانحراف</th>
						<th class="text-center fit" style="width:7%;">النسبة</th>
					</tr>
                </thead>
                <tbody>
	                <t t-foreach="data_rows" t-as="row">
	                        	<tr style="page-break-inside: avoid;">
	                        		<td class="text-right">
										<t t-esc="row_index + 1"/>
									</td>
	                        		<td class="text-right fit">
	                        			  <a data-toggle="collapse" t-attf-href="#col#{row['account_id']}" aria-expanded="false" >
	                                    	<t t-esc="row['account_name']"/> 
	                                    </a>
	                                </td>

	                                <td class="text-right">
	                                	<t t-esc="row['annual_budget_value']"/>
	                                </td>

	                                <td class="text-right">
	                                	<t t-esc="row['estimated_budget_value']"/>
	                                </td>

	                                <td class="text-right">
	                                	<t t-esc="row['actual_value']"/>
	                                </td>

	                                <td class="text-right">
	                                	<t t-esc="row['remaining_value']"/>
	                                </td>

	                                <td class="text-right">
	                                	<t t-esc="row['percentage']"/>%
	                                </td>
	                            </tr>

	                            <tr class="collapse out" t-attf-id="col#{row['account_id']}">
									<t t-foreach="row['branches_rows']" t-as="branch_line">
										<tr class="collapse out" t-attf-id="col#{row['account_id']}">
											<td/>
											<td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
												<div style="margin-right:50px; float:right;text-align:start;">
													<strong>
													<t t-esc="branch_line['branch_name']"/>
													</strong>
													<t t-esc="branch_line['account_name']"/>

												</div>
											</td>


											<td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
												<div style="margin-right:50px; float:right;text-align:start;">
												<t t-esc="branch_line['annual_budget_value']"/>
												</div>
											</td>


											<td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
												<div style="margin-right:50px; float:right;text-align:start;">
												<t t-esc="branch_line['estimated_budget_value']"/>
												</div>
											</td>

											<td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
												<div style="margin-right:50px; float:right;text-align:start;">
												<t t-esc="branch_line['actual_value']"/>
												</div>
											</td>


											<td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
												<div style="margin-right:50px; float:right;text-align:start;">
												<t t-esc="branch_line['remaining_value']"/>
												</div>
											</td>


											<td style="font:300; white-space: nowrap;width: 1%; padding:5px;">
												<div style="margin-right:50px; float:right;text-align:start;">
												<t t-esc="branch_line['percentage']"/>%
												</div>
											</td>
										</tr>
									</t>
								</tr>
	                        </t>
	                        <tr class="table-active">
	                        	<td class="text-center fit" colspan="2">
	                        		<strong>
	                        			الإجمالي
	                        		</strong>
	                        	</td>

	                        	<td class="text-center fit">
	                        		<strong>
	                        			<t t-esc="total_annual_budget_value"/>
	                        		</strong>
	                        	</td>

	                        	<td class="text-center fit">
	                        		<strong>
	                        			<t t-esc="total_estimated_budget_value"/>
	                        		</strong>
	                        	</td>

	                        	<td class="text-center fit">
	                        		<strong>
	                        			<t t-esc="total_actual_value"/>
	                        		</strong>
	                        	</td>

	                        	<td class="text-center fit">
	                        		<strong>
	                        			<t t-esc="total_remaining_value"/>
	                        		</strong>
	                        	</td>

	                        	<td class="text-center fit">
	                        		<strong>
	                        			<t t-esc="total_percentage"/>%
	                        		</strong>
	                        	</td>

	                        </tr>
	                    </tbody>
                    </table>
                    .
                    <br/><br/>

				</div>
			</t>
	</template>


</odoo>