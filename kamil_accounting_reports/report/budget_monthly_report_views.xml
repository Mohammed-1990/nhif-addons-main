<?xml version="1.0" encoding="utf-8" ?>
<odoo>

	  <record id="paperformat_budget_monthly" model="report.paperformat">
        <field name="name">European A4 low margin</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Landscape</field>
        <field name="margin_top">5</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">5</field>
        <field name="margin_right">5</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
        <field name="dpi">80</field>
    </record>


	
	<!--Budget Monthy Report-->
	<report 
		id="budget_monthly_report"
		model="wizard.budget.monthly.report"
		string="Budget Monthy Report"
		report_type="qweb-html"
		name="kamil_accounting_reports.budget_monthly_template"
		paperformat="kamil_accounting_reports.paperformat_a3_landscape"
		/>


	<!--Budget Monthly Template-->
	<template id="budget_monthly_template">
			<t t-call="web.html_container">
				<div class="page" >
					<div class="text-center">
					<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
				</div>
				<br/><br/>
					<div dir="rtl" style="float:right;text-align:start;">
						<a href="#" target="_blank">
							<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor">
								<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
								<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
								<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
							</svg>
						</a>
					</div>
				
					<div class="container">
						<div class="row">
							<div class="col-sm-12">
					<div class="text-center">
						<strong>
							<p>تقرير الموازنة بالشهور<br/>
							  <t t-esc="budget_name"/> </p>
						</strong>
					</div><br/>
					<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">
						<thead class="table-active" style="display: table-header-group;">
							<tr class="table-active">
								<th class="text-center fit">#</th>
								<th class="text-center fit" >بند الموازنة</th>
								<th class="text-center fit">القيمة المعتمدة</th>
								<th class="text-center fit">يناير</th>
								<th class="text-center fit">فبراير</th>
								<th class="text-center fit">مارس</th>
								<th class="text-center fit">ابريل</th>
								<th class="text-center fit">مايو</th>
								<th class="text-center fit">يونيو</th>
								<th class="text-center fit">يوليو</th>
								<th class="text-center fit">أغسطس</th>
								<th class="text-center fit">سبتمر</th>
								<th class="text-center fit">اكتوبر</th>
								<th class="text-center fit">نوفمبر</th>
								<th class="text-center fit">ديسمبر</th>
								<th class="text-center fit">الاجمالي</th>
								<th class="text-center fit">المتبقي / الانحراف</th>
								<th class="text-center fit">النسبة</th>
							</tr>
						</thead>
						<tbody>
							<t t-foreach="docs" t-as="doc">
								<tr style="page-break-inside: avoid;">
									<td class="text-center" style="width:40%;">
										<t t-esc="doc_index + 1"/>
									</td>
									<td class="text-center fit">
										<t t-esc="doc['item']"/>
									</td>
									<td class="text-center fit">
										<t t-esc="'{0:,.2f}'.format(float(doc['planned_amount']))"/>
									</td>
									<td class="text-center fit">
											<t t-if="doc['month_amount'][0]['1'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][0]['1'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][0]['1'] &gt; 0 or doc['month_amount'][0]['1'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][0]['1'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										
										<t t-if="doc['month_amount'][1]['2'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][1]['2'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][1]['2'] &gt; 0 or doc['month_amount'][1]['2'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][1]['2'] ))"/>
										</t>


									</td>
									<td class="text-center fit">
									
										<t t-if="doc['month_amount'][2]['3'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][2]['3'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][2]['3'] &gt; 0 or doc['month_amount'][2]['3'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][2]['3'] ))"/>
										</t>

										
									</td>


									<td class="text-center fit">
										<t t-if="doc['month_amount'][3]['4'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][3]['4'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][3]['4'] &gt; 0 or doc['month_amount'][3]['4'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][3]['4'] ))"/>
										</t>
									</td>

									<td class="text-center fit">
									
										<t t-if="doc['month_amount'][4]['5'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][4]['5'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][4]['5'] &gt; 0 or doc['month_amount'][4]['5'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][4]['5'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['month_amount'][5]['6'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][5]['6'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][5]['6'] &gt; 0 or doc['month_amount'][5]['6'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][5]['6'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['month_amount'][6]['7'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][6]['7'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][6]['7'] &gt; 0 or doc['month_amount'][6]['7'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][6]['7'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['month_amount'][7]['8'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][7]['8'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][7]['8'] &gt; 0 or doc['month_amount'][7]['8'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][7]['8'] ))"/>
										</t>
									</td>

									<td class="text-center fit">
										<t t-if="doc['month_amount'][8]['9'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][8]['9'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][8]['9'] &gt; 0 or doc['month_amount'][8]['9'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][8]['9'] ))"/>
										</t>
									</td>

									<td class="text-center fit">
										<t t-if="doc['month_amount'][9]['10'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][9]['10'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][9]['10'] &gt; 0 or doc['month_amount'][9]['10'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][9]['10'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['month_amount'][10]['11'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][10]['11'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][10]['11'] &gt; 0 or doc['month_amount'][10]['11'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][10]['11'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['month_amount'][11]['12'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float( abs(doc['month_amount'][11]['12'] ) ))"/>)
										</t>
										<t t-if="doc['month_amount'][11]['12'] &gt; 0 or doc['month_amount'][11]['12'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float( doc['month_amount'][11]['12'] ))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['total'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float(abs(doc['total']) ))"/>)
										</t>
										<t t-if="doc['total'] &gt; 0 or doc['total'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float(doc['total']))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-if="doc['remaining_value'] &lt; 0 ">
											(<t t-esc="'{0:,.2f}'.format(float(abs(doc['remaining_value'])  ))"/>)
										</t>
										<t t-if="doc['remaining_value'] &gt; 0 or doc['remaining_value'] == 0 ">
											<t t-esc="'{0:,.2f}'.format(float(doc['remaining_value']))"/>
										</t>
									</td>
									<td class="text-center fit">
										<t t-esc="'{0:,.2f}'.format(float(doc['exchange_rate']))"/>%
									</td>
								</tr>
							</t>
							<tr style="page-break-inside: avoid;" class="table-active">
                        		<th colspan="2"><b> الإجمالي </b></th>
                        		<th class="text-center">
                        			<t t-set="total_planned_amount" t-value="sum([p['planned_amount'] for p in docs])"/>

                        			<t t-esc="'{0:,.2f}'.format(float(total_planned_amount))"/>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][0]['1'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][1]['2'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][2]['3'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>

                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][3]['4'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][4]['5'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>		
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][5]['6'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>                    
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][6]['7'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][7]['8'] for p in docs])"/>
                        		
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][8]['9'] for p in docs])"/>

                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][9]['10'] for p in docs])"/>

                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][10]['11'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_month_amount" t-value="sum([p['month_amount'][11]['12'] for p in docs])"/>
                        			<t t-if="total_month_amount &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_month_amount) ))"/>)
									</t>
									<t t-if="total_month_amount &gt; 0 or total_month_amount == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_month_amount))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_total" t-value="sum([p['total'] for p in docs])"/>
                        			
                        			<t t-if="total_total &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_total) ))"/>)
									</t>
									<t t-if="total_total &gt; 0 or total_total == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_total))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-set="total_remaining_value" t-value="sum([p['remaining_value'] for p in docs])"/>

                        			<t t-if="total_remaining_value &lt; 0 ">
										(<t t-esc="'{0:,.2f}'.format(float(abs(total_remaining_value) ))"/>)
									</t>
									<t t-if="total_remaining_value &gt; 0 or total_remaining_value == 0 ">
										<t t-esc="'{0:,.2f}'.format(float(total_remaining_value))"/>
									</t>
                        		</th>
                        		<th class="text-center">
                        			<t t-if="total_planned_amount &gt; 0">
                        				<t t-esc="'{0:,.2f}'.format(float( total_total / total_planned_amount * 100 ))"/>%
                        			</t>
                        			<t t-if="total_planned_amount == 0 or total_planned_amount &lt; 0">
                        				<t t-esc="0"/>
                        			</t>
                        		</th>
                        	</tr>
						</tbody>
					</table>
				</div>
			</div>
				</div>
				</div>
			</t>
	</template>


</odoo>