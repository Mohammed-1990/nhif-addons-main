<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	
	<!-- Trial Balance Report-->
	<report 
		id="trial_balance_report"
		model="wiz.trial.balances"
		string="Trial Balance Report"
		report_type="qweb-html"
		name="kamil_accounting_reports.trial_balance_tempate"
	/>


	<!-- Trial Balance Template-->
	<template id="trial_balance_tempate">
			<t t-call="web.html_container">
                <div class="page">
				<div class="text-center">
					<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
				</div>
				<br/><br/>
				<div dir="rtl" style="float:right;text-align:start;">
					<a href="#" target="_blank">
						<svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-printer" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							<path d="M11 2H5a1 1 0 0 0-1 1v2H3V3a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2h-1V3a1 1 0 0 0-1-1zm3 4H2a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h1v1H2a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1z"/>
							<path fill-rule="evenodd" d="M11 9H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1zM5 8a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H5z"/>
							<path d="M3 7.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
						</svg>
					</a>
				</div>


					<div class="text-center">
						<strong class="text-center">

							<t t-if="report_type == 'balances'">
								
								<div class="text-center" style="font:900;" >
								    <strong>
				  					   <p>
											<b>ميزان المراجعة بالارصدة </b>
											<br/>	
											<t t-if="date_to" >
												بتاريخ
												<t t-esc="date_to"/>
											</t>
										</p>
									</strong>
								</div>


							</t>
							<t t-if="report_type == 'totals'">

								<div class="text-center" style="font:900;" >
								    <strong>
				  					   <p>

										<b>ميزان المراجعة بالمجاميع</b>
										<br/>	
										<b>
											<t t-if="date_from" >
												للفترة من
												<t t-esc="date_from"/>
											</t>

											<t t-if="date_to" >
												الى
												<t t-esc="date_to"/>
											</t>
										</b>
									</p>
								</strong>
							</div>



							</t>

						</strong>	
						<br/>
					</div>

					 <div dir="rtl" style="float:right;text-align:start;">
                        <strong>
                        	<t t-if="len(selected_company_names) == 1">
                        		الفرع :
                        	</t>

                        	<t t-if="len(selected_company_names) > 1">
                        		الفروع :
                        	</t>
                        	<t t-foreach="selected_company_names" t-as="company_name">
                        		<t t-esc="company_name"/>,
                        	</t>
                        </strong>
                        <br/><br/>
                    </div>
					<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">    
                    	<thead style="display: table-header-group;">
                        	<tr class="table-active">
                        		<td class="text-center fit">البيان</td>
                        		<td class="text-center fit">مدين</td>
                        		<td class="text-center fit">دائن</td>
                        	</tr>
                        </thead>
                        <tbody>
                        	<t t-foreach="docs" t-as="doc">
	                        	<tr style="page-break-inside: avoid;">
	                        		<td class="text-right">
	                        			<a data-toggle="collapse" t-attf-href="#col#{doc['account_id']}" aria-expanded="false" style="float:right;text-align:start;" >
	                                    	<t t-esc="doc['account_name']"/>
	                                    </a>
	                                </td>
	                                <td class="text-center">
	                                	<t t-esc="'{0:,.2f}'.format(float(doc['debit']))"/>	       
	                                </td>
	                                <td class="text-center">
	                                	<t t-esc="'{0:,.2f}'.format(float(doc['credit']))"/>
	                                </td>
	                        	</tr>
	                        	<tr class="collapse out" t-attf-id="col#{doc['account_id']}">
									<t t-foreach="doc['state_lines']" t-as="state_line">
										<tr class="collapse out" t-attf-id="col#{doc['account_id']}">
											
											<td class="text-right">
												<div style="margin-right:50px; float:right;text-align:start;">
													<t t-esc="state_line['branch_name']"/>
												</div>
											</td>

											<td class="text-center">
												<div style="margin-right:50px; float:right;text-align:start;">
													<t t-esc="'{0:,.2f}'.format(float( state_line['state_debit'] ))"/>
												</div>
											</td>
											<td class="text-center">
												<div style="margin-right:50px; float:right;text-align:start;">
													<t t-esc="'{0:,.2f}'.format(float( state_line['state_credit'] ))"/>
												</div>
											</td>
										</tr>
									</t>
								</tr>
	                        </t>
	                        <tr style="page-break-inside: avoid;" class="table-active">
                        		<td  class="text-center"><b>الاجمالي</b></td>
                        		<td class="text-right">
                        			<b>
                        				<t t-esc="'{0:,.2f}'.format(float(sum([p['debit'] for p in docs])))"/>
                        			</b>
                        		</td>
                        		<td class="text-right">
                        			<b>
                        				<t t-esc="'{0:,.2f}'.format(float(sum([p['credit'] for p in docs])))"/>
                        			</b>
                        		</td>
                        	</tr>
                        </tbody>
                    </table>
                </div>
			</t>
	</template>
</odoo>