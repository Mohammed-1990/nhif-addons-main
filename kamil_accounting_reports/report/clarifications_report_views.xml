<?xml version="1.0" encoding="utf-8" ?>
<odoo>
	
	<report 
		id="clarifications_report"
		model="wiz.clarifications"
		string="Clarifications Report"
		report_type="qweb-html"
		name="kamil_accounting_reports.clarifications_template"
	/>

	<template id="clarifications_template">
			<t t-call="web.html_container">
				<div class="page">
					<div class="text-center">
						<img t-if="company_id_logo" t-att-src="image_data_uri(company_id_logo)" class="img-fluid oe_slides_channel_thumbnail" alt="Logo"/>
					</div>
					<br/><br/>
					<div class="text-right" style="font:500;">
                        <p>ايضاح رقم (<t t-esc="clarification_number"/>) <t t-esc="account"/>
                        <br/>
						</p>
                    </div>
					<table style="margin:10px;width:100%;" dir="rtl" class="table-bordered">
                        <thead style="display: table-header-group;">
                        	<tr style="page-break-inside: avoid;" class="table-active">
                        		<th class="text-center" style="width:5%;" >الرقم</th>
                        		<th class="text-center fit">البيان</th>
                        		<th class="text-center" style="width:20%;">المبلغ</th>
                        	</tr>
                        </thead>
                        <tbody>
                        	<t t-foreach="docs" t-as="doc">
                        	<t t-if="doc['is_group'] == 'group'">
                        		<tr>
									<t t-set="total" t-value="total+doc['amount']"/>
									<td class="text-center">
										<t class="text-center" t-esc="doc['count']"/>
									</td>
										<td class="text-center">
											<a data-toggle="collapse" t-attf-href="#col#{doc['id']}" aria-expanded="false" style="float:right;text-align:start;">
												<t class="text-center" t-esc="doc['account_name']"/>
											</a>
										</td>
									<td class="text-center">
										<t t-esc="'{0:,.2f}'.format(float(doc['amount']))" />
									</td>
								</tr>
							</t>


                        	<t t-if="docs==[]">
                        		<tr>
                        			<td colspan="3">لا تـــــوجد بيـــانات</td>
                        		</tr>
                        	</t>
								<tr class="collapse out" t-attf-id="col#{doc['id']}">
                        			<t t-foreach="line" t-as="l">
                        			<t t-if="l['is_group'] == 'sub_account'">
                        			<t t-if="l['parent_id'] == doc['id']">
										<tr data-toggle="collapse" class="collapse out" t-attf-id="col#{doc['id']}" >
									<t/>
										<td class="text-center">
										<t class="text-center" t-esc="l['count']"/>
									</td>
										<td class="text-center">
												<t class="text-center" t-esc="l['account_name']"/>
										</td>
									<td class="text-center">
										<t t-esc="'{0:,.2f}'.format(float(l['amount']))" />
									</td>
									</tr>
									</t>
									</t>
									</t>
								</tr>
							</t>
							<tr>
                        		<th colspan="2" class="text-center">الإجمـــالي</th>
                        		<th class="text-center">
                        			<t t-esc="'{0:,.2f}'.format(float(total))" />
                        		</th>

                        	</tr>

                        </tbody>
                    </table>
                </div>
			</t>
	</template>


</odoo>